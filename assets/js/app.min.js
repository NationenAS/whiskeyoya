const start=[12.477378845214844,66.76016258859444];mapboxgl.accessToken="pk.eyJ1IjoiamFyYW5kIiwiYSI6ImNrZnBhMDBuMjBzajEycm9laGFzenN2MjcifQ.5QyfTBxmSzxDGAyZ_kTusA";const map=new mapboxgl.Map({container:"map",style:"mapbox://styles/jarand/ckybjbmcg0t8q14mjjvipvoj8",center:start,zoom:3,interactive:!1});let m=document.querySelector("#map"),mapObserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting?map.easeTo({zoom:14.3,duration:8e3,pitch:45,bearing:50,easing:e=>-(Math.cos(3.14*e)-1)/2}):(map.stop(),map.easeTo({zoom:4,duration:2e3,pitch:0,bearing:0,easing:e=>Math.sin(3.14*e/2)}))})},{threshold:.8});mapObserver.observe(m);let videos=document.querySelectorAll("video.intersect"),observeVideo=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting||e.target.paused?e.isIntersecting&&e.target.paused&&e.target.play():e.target.pause()})},{threshold:.3});videos.forEach(e=>{observeVideo.observe(e)});let natStories=document.querySelectorAll(".story"),id=1;natStories.forEach(e=>{e.dataset.story=id,id++;let t=e.getBoundingClientRect(),r=e.querySelectorAll(".story__background, .story__trigger"),a=0,o=e.querySelectorAll(".story__background");r.forEach(e=>{"story__background"==e.className?(a++,e.dataset.storyId=a,1==a&&t.y>0?e.dataset.storyState="active":a==o.length&&t.y<0&&(e.dataset.storyState="active")):e.classList.contains("story__trigger")&&(e.dataset.storyControl=a)})});var elementObserver=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;if(e.isIntersecting){let e=t.parentNode,r=parseInt(t.dataset.storyControl),a=e.querySelector(".story__background[data-story-id='"+r+"']"),o=e.querySelector(".story__background[data-story-id='"+(r-1)+"']"),s=e.querySelector(".story__background[data-story-id='"+(r+1)+"']");e.querySelectorAll("[data-story-state]").forEach(e=>{delete e.dataset.storyState}),t.dataset.storyState=a.dataset.storyState="active",null!==o&&(o.dataset.storyState="prev"),null!==s&&(s.dataset.storyState="next")}else delete t.dataset.storyState})},{threshold:.4}),storyElement=document.querySelectorAll(".story__trigger");storyElement.forEach(e=>{elementObserver.observe(e)});